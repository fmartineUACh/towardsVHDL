SUBDESIGN moore2
(
	clk	: INPUT;
	reset	: INPUT;
	y		: INPUT;
	z		: OUTPUT;
)
VARIABLE
	ss: MACHINE WITH STATES (s0, s1, s2, s3);
	zd: NODE;
BEGIN
	ss.clk   = clk;
	ss.reset = reset;

	z = DFF(zd, clk, VCC, VCC);

	TABLE
	%	current	current		next		next   %
	%	state		input		state		output %
		ss,		y		=>	ss,		zd;

		s0,		0		=>	s0,		0;
		s0,		1		=>	s2,		1;
		s1,		0		=>	s0,		0;
		s1,		1		=>	s2,		1;
		s2,		0		=>	s2,		1;
		s2,		1		=>	s3,		0;
		s3,		0		=>	s3,		0;
		s3,		1		=>	s1,		1;
	END TABLE;
END;
